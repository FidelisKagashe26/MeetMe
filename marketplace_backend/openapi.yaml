openapi: 3.0.3
info:
  title: Marketplace API
  version: 1.0.0
  description: Location-based marketplace backend
paths:
  /api/auth/change-password/:
    post:
      operationId: auth_change_password_create
      description: Change password for logged-in user
      summary: Change password for current user
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleMessage'
          description: ''
  /api/auth/jwt/create/:
    post:
      operationId: auth_jwt_create_create
      description: |-
        Takes a set of user credentials and returns an access and refresh JSON web
        token pair to prove the authentication of those credentials.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
        required: true
      security:
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenObtainPair'
          description: ''
  /api/auth/jwt/refresh/:
    post:
      operationId: auth_jwt_refresh_create
      description: |-
        Takes a refresh type JSON web token and returns an access type JSON web
        token if the refresh token is valid.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
        required: true
      security:
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenRefresh'
          description: ''
  /api/auth/jwt/verify/:
    post:
      operationId: auth_jwt_verify_create
      description: |-
        Takes a token and indicates if it is valid.  This view provides no
        information about a token's fitness for a particular use.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenVerifyRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenVerifyRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenVerifyRequest'
        required: true
      security:
      - BearerAuth: []
      responses:
        '200':
          description: No response body
  /api/auth/login/:
    post:
      operationId: auth_login_create
      description: |-
        Login user and return JWT access & refresh tokens.

        NOTE: The request uses `username` field, but frontend may send either:
          - username
          - or email (we try both)
      summary: Login user and return JWT tokens
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LoginRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LoginRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JWTToken'
          description: ''
        '400':
          description: Missing credentials
        '401':
          description: Invalid credentials
  /api/auth/logout/:
    post:
      operationId: auth_logout_create
      description: |-
        Logout user by blacklisting refresh token.
        Client should also delete tokens locally.
      summary: Logout user by blacklisting refresh token
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LogoutRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LogoutRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LogoutRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleMessage'
          description: ''
        '400':
          description: Error while logging out
  /api/auth/me/:
    get:
      operationId: auth_me_retrieve
      description: |-
        GET: return current user profile
        PUT/PATCH: update basic fields (first_name, last_name, preferred_language, theme)
      summary: Get or update current user profile
      tags:
      - auth
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
    put:
      operationId: auth_me_update
      description: |-
        GET: return current user profile
        PUT/PATCH: update basic fields (first_name, last_name, preferred_language, theme)
      summary: Get or update current user profile
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserSettingsUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserSettingsUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserSettingsUpdateRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
    patch:
      operationId: auth_me_partial_update
      description: |-
        GET: return current user profile
        PUT/PATCH: update basic fields (first_name, last_name, preferred_language, theme)
      summary: Get or update current user profile
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedUserSettingsUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedUserSettingsUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedUserSettingsUpdateRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
  /api/auth/register/:
    post:
      operationId: auth_register_create
      description: Register a new user and return JWT tokens
      summary: Register a new user
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JWTToken'
          description: ''
        '400':
          description: Validation error
  /api/auth/settings/:
    get:
      operationId: auth_settings_retrieve
      description: |-
        Manage user settings:
        - first_name, last_name
        - preferred_language: 'en' / 'sw'
        - theme: 'light' / 'dark' / 'system'
      summary: Get or update user settings (profile + preferences)
      tags:
      - auth
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
          description: ''
    put:
      operationId: auth_settings_update
      description: |-
        Manage user settings:
        - first_name, last_name
        - preferred_language: 'en' / 'sw'
        - theme: 'light' / 'dark' / 'system'
      summary: Get or update user settings (profile + preferences)
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserSettingsUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserSettingsUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserSettingsUpdateRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
          description: ''
    patch:
      operationId: auth_settings_partial_update
      description: |-
        Manage user settings:
        - first_name, last_name
        - preferred_language: 'en' / 'sw'
        - theme: 'light' / 'dark' / 'system'
      summary: Get or update user settings (profile + preferences)
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedUserSettingsUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedUserSettingsUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedUserSettingsUpdateRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
          description: ''
  /api/categories/:
    get:
      operationId: categories_list
      description: ViewSet for product categories
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - categories
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedCategoryList'
          description: ''
    post:
      operationId: categories_create
      description: ViewSet for product categories
      tags:
      - categories
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CategoryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CategoryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CategoryRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
          description: ''
  /api/categories/{id}/:
    get:
      operationId: categories_retrieve
      description: ViewSet for product categories
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this category.
        required: true
      tags:
      - categories
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
          description: ''
    put:
      operationId: categories_update
      description: ViewSet for product categories
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this category.
        required: true
      tags:
      - categories
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CategoryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CategoryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CategoryRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
          description: ''
    patch:
      operationId: categories_partial_update
      description: ViewSet for product categories
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this category.
        required: true
      tags:
      - categories
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedCategoryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedCategoryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedCategoryRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
          description: ''
    delete:
      operationId: categories_destroy
      description: ViewSet for product categories
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this category.
        required: true
      tags:
      - categories
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/conversations/:
    get:
      operationId: conversations_list
      description: Conversation kati ya buyer na seller
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - conversations
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedConversationList'
          description: ''
    post:
      operationId: conversations_create
      description: |-
        Create or reuse conversation between current user (buyer) and seller.

        Body:
        {
          "seller_id": 1,
          "product_id": 10  # optional
        }
      tags:
      - conversations
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConversationDetail'
          description: ''
  /api/conversations/{id}/:
    get:
      operationId: conversations_retrieve
      description: Conversation kati ya buyer na seller
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this conversation.
        required: true
      tags:
      - conversations
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConversationDetail'
          description: ''
    put:
      operationId: conversations_update
      description: Conversation kati ya buyer na seller
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this conversation.
        required: true
      tags:
      - conversations
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Conversation'
          description: ''
    patch:
      operationId: conversations_partial_update
      description: Conversation kati ya buyer na seller
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this conversation.
        required: true
      tags:
      - conversations
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Conversation'
          description: ''
    delete:
      operationId: conversations_destroy
      description: Conversation kati ya buyer na seller
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this conversation.
        required: true
      tags:
      - conversations
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/conversations/{id}/mark_seen/:
    post:
      operationId: conversations_mark_seen_create
      description: |-
        Tandika messages zote (za upande mwingine) kama zimesomwa
        na update participant_state (last_seen_at, last_read_at).
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this conversation.
        required: true
      tags:
      - conversations
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Conversation'
          description: ''
  /api/conversations/{id}/typing/:
    post:
      operationId: conversations_typing_create
      description: |-
        Update typing state kwa current user kwenye conversation hii.

        Body:
        {
          "is_typing": true/false
        }
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this conversation.
        required: true
      tags:
      - conversations
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Conversation'
          description: ''
  /api/favorites/:
    get:
      operationId: favorites_list
      description: ViewSet for user favorites (sellers)
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - favorites
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedFavoriteList'
          description: ''
    post:
      operationId: favorites_create
      description: ViewSet for user favorites (sellers)
      tags:
      - favorites
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Favorite'
          description: ''
  /api/favorites/{id}/:
    get:
      operationId: favorites_retrieve
      description: ViewSet for user favorites (sellers)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this favorite.
        required: true
      tags:
      - favorites
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Favorite'
          description: ''
    put:
      operationId: favorites_update
      description: ViewSet for user favorites (sellers)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this favorite.
        required: true
      tags:
      - favorites
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Favorite'
          description: ''
    patch:
      operationId: favorites_partial_update
      description: ViewSet for user favorites (sellers)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this favorite.
        required: true
      tags:
      - favorites
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedFavoriteRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedFavoriteRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedFavoriteRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Favorite'
          description: ''
    delete:
      operationId: favorites_destroy
      description: ViewSet for user favorites (sellers)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this favorite.
        required: true
      tags:
      - favorites
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/favorites/toggle/:
    post:
      operationId: favorites_toggle_create
      description: Toggle favorite status for a seller
      tags:
      - favorites
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Favorite'
          description: ''
  /api/location/distance/:
    post:
      operationId: location_distance_create
      description: |-
        Calculate distance between two points (km + miles) using **Google Maps**.

        - Inatumia Distance Matrix API (mode=driving, units=metric).
        - Input: latitude1, longitude1, latitude2, longitude2.
      summary: Calculate distance between two points using Google Distance Matrix
      tags:
      - location
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DistanceRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DistanceRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DistanceRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DistanceResponse'
          description: ''
        '400':
          description: Bad request or invalid coordinates
  /api/messages/:
    get:
      operationId: messages_list
      description: Chat messages ndani ya conversation
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - messages
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedMessageList'
          description: ''
    post:
      operationId: messages_create
      description: |-
        Create message mpya ndani ya conversation:

        Body:
        {
          "conversation": 1,
          "text": "Habari..."
        }

        - Inathibitisha kuwa current user ni participant.
        - Inahakikisha conversation_id sio NULL (tunachukua kutoka validated_data).
        - Inahifadhi Message manual (Message.objects.create(...)).
        - Inafanya:
            * Conversation.last_message_at update
            * ParticipantState kwa sender (last_seen, last_read)
            * Notification kwa mtu wa pili
            * Realtime WebSocket push -> group "chat_<conversation_id>"
      tags:
      - messages
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MessageCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MessageCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MessageCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageCreate'
          description: ''
  /api/messages/{id}/:
    get:
      operationId: messages_retrieve
      description: Chat messages ndani ya conversation
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this message.
        required: true
      tags:
      - messages
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
          description: ''
    put:
      operationId: messages_update
      description: Chat messages ndani ya conversation
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this message.
        required: true
      tags:
      - messages
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MessageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MessageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MessageRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
          description: ''
    patch:
      operationId: messages_partial_update
      description: Chat messages ndani ya conversation
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this message.
        required: true
      tags:
      - messages
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedMessageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedMessageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedMessageRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
          description: ''
    delete:
      operationId: messages_destroy
      description: Chat messages ndani ya conversation
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this message.
        required: true
      tags:
      - messages
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/messages/{id}/mark_read/:
    post:
      operationId: messages_mark_read_create
      description: Tandika ujumbe mmoja kama umesomwa (READ) kwa current user.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this message.
        required: true
      tags:
      - messages
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MessageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MessageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MessageRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
          description: ''
  /api/notifications/:
    get:
      operationId: notifications_list
      description: Notifications kwa user (orders, chat, n.k.)
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - notifications
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedNotificationList'
          description: ''
    post:
      operationId: notifications_create
      description: Notifications kwa user (orders, chat, n.k.)
      tags:
      - notifications
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NotificationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/NotificationRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/NotificationRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
          description: ''
  /api/notifications/{id}/:
    get:
      operationId: notifications_retrieve
      description: Notifications kwa user (orders, chat, n.k.)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this notification.
        required: true
      tags:
      - notifications
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
          description: ''
    put:
      operationId: notifications_update
      description: Notifications kwa user (orders, chat, n.k.)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this notification.
        required: true
      tags:
      - notifications
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NotificationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/NotificationRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/NotificationRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
          description: ''
    patch:
      operationId: notifications_partial_update
      description: Notifications kwa user (orders, chat, n.k.)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this notification.
        required: true
      tags:
      - notifications
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedNotificationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedNotificationRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedNotificationRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
          description: ''
    delete:
      operationId: notifications_destroy
      description: Notifications kwa user (orders, chat, n.k.)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this notification.
        required: true
      tags:
      - notifications
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/notifications/mark_all_read/:
    post:
      operationId: notifications_mark_all_read_create
      description: Tandika notifications zote kama zimesomwa
      tags:
      - notifications
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NotificationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/NotificationRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/NotificationRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
          description: ''
  /api/orders/:
    get:
      operationId: orders_list
      description: Orders kati ya mnunuaji (buyer) na muuzaji (seller)
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - orders
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedOrderList'
          description: ''
    post:
      operationId: orders_create
      description: Orders kati ya mnunuaji (buyer) na muuzaji (seller)
      tags:
      - orders
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/OrderCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/OrderCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderCreate'
          description: ''
  /api/orders/{id}/:
    get:
      operationId: orders_retrieve
      description: Orders kati ya mnunuaji (buyer) na muuzaji (seller)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this order.
        required: true
      tags:
      - orders
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
          description: ''
    put:
      operationId: orders_update
      description: Orders kati ya mnunuaji (buyer) na muuzaji (seller)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this order.
        required: true
      tags:
      - orders
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/OrderRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/OrderRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
          description: ''
    patch:
      operationId: orders_partial_update
      description: Orders kati ya mnunuaji (buyer) na muuzaji (seller)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this order.
        required: true
      tags:
      - orders
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedOrderRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedOrderRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedOrderRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
          description: ''
    delete:
      operationId: orders_destroy
      description: Orders kati ya mnunuaji (buyer) na muuzaji (seller)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this order.
        required: true
      tags:
      - orders
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/orders/as_buyer/:
    get:
      operationId: orders_as_buyer_retrieve
      description: Orders ambazo mimi ni buyer
      tags:
      - orders
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
          description: ''
  /api/orders/as_seller/:
    get:
      operationId: orders_as_seller_retrieve
      description: Orders ambazo mimi ni seller
      tags:
      - orders
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
          description: ''
  /api/product-images/:
    get:
      operationId: product_images_list
      description: ViewSet for product images (gallery uploads)
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - product-images
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedProductImageList'
          description: ''
    post:
      operationId: product_images_create
      description: ViewSet for product images (gallery uploads)
      tags:
      - product-images
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductImage'
          description: ''
  /api/product-images/{id}/:
    get:
      operationId: product_images_retrieve
      description: ViewSet for product images (gallery uploads)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product image.
        required: true
      tags:
      - product-images
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductImage'
          description: ''
    put:
      operationId: product_images_update
      description: ViewSet for product images (gallery uploads)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product image.
        required: true
      tags:
      - product-images
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductImage'
          description: ''
    patch:
      operationId: product_images_partial_update
      description: ViewSet for product images (gallery uploads)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product image.
        required: true
      tags:
      - product-images
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedProductImageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedProductImageRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedProductImageRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductImage'
          description: ''
    delete:
      operationId: product_images_destroy
      description: ViewSet for product images (gallery uploads)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product image.
        required: true
      tags:
      - product-images
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/product-likes/:
    get:
      operationId: product_likes_list
      description: Likes kwa kila product (user mmoja a-like mara moja)
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - product-likes
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedProductLikeList'
          description: ''
    post:
      operationId: product_likes_create
      description: Likes kwa kila product (user mmoja a-like mara moja)
      tags:
      - product-likes
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductLikeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductLikeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductLikeRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductLike'
          description: ''
  /api/product-likes/{id}/:
    get:
      operationId: product_likes_retrieve
      description: Likes kwa kila product (user mmoja a-like mara moja)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product like.
        required: true
      tags:
      - product-likes
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductLike'
          description: ''
    put:
      operationId: product_likes_update
      description: Likes kwa kila product (user mmoja a-like mara moja)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product like.
        required: true
      tags:
      - product-likes
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductLikeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductLikeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductLikeRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductLike'
          description: ''
    patch:
      operationId: product_likes_partial_update
      description: Likes kwa kila product (user mmoja a-like mara moja)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product like.
        required: true
      tags:
      - product-likes
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedProductLikeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedProductLikeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedProductLikeRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductLike'
          description: ''
    delete:
      operationId: product_likes_destroy
      description: Likes kwa kila product (user mmoja a-like mara moja)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product like.
        required: true
      tags:
      - product-likes
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/product-likes/toggle/:
    post:
      operationId: product_likes_toggle_create
      description: |-
        Toggle like/unlike for a product

        Body:
        {
          "product_id": 123
        }
      tags:
      - product-likes
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductLikeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductLikeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductLikeRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductLike'
          description: ''
  /api/products/:
    get:
      operationId: products_list
      description: |-
        /api/products/

        - Inatumia filters za kawaida (search, category, price, location ya mji).
        - Kama lat & lng zimetumwa  ina-add distance_km kwa kila product
          kwa kutumia Google Distance Matrix, inapanga kwa distance ASC
          bila ku-cut off kwa radius.
        - Inarudisha ARRAY tu, hakuna pagination ya backend.
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - products
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedProductList'
          description: ''
    post:
      operationId: products_create
      description: |-
        ViewSet for products with location-based SORTING ONLY.

        MUHIMU:
        - /api/products/ daima inarudisha ARRAY ya products (hakuna pagination ya backend).
        - Ukipeleka lat & lng  tunahesabu distance kwa kila product kwa kutumia
          Google Distance Matrix na KUPANGA kwa ukaribu (distance asc) bila
          kuweka limit ya radius.
        - `location` (mji/mkoa) inatumika kama filter ya city, isipokuwa kama
          imekuja kama "Current location" n.k. kutoka frontend  hiyo tuna-ignore
          kama filter ili isilete EMPTY results.
      tags:
      - products
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductCreate'
          description: ''
  /api/products/{id}/:
    get:
      operationId: products_retrieve
      description: |-
        ViewSet for products with location-based SORTING ONLY.

        MUHIMU:
        - /api/products/ daima inarudisha ARRAY ya products (hakuna pagination ya backend).
        - Ukipeleka lat & lng  tunahesabu distance kwa kila product kwa kutumia
          Google Distance Matrix na KUPANGA kwa ukaribu (distance asc) bila
          kuweka limit ya radius.
        - `location` (mji/mkoa) inatumika kama filter ya city, isipokuwa kama
          imekuja kama "Current location" n.k. kutoka frontend  hiyo tuna-ignore
          kama filter ili isilete EMPTY results.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product.
        required: true
      tags:
      - products
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
          description: ''
    put:
      operationId: products_update
      description: |-
        ViewSet for products with location-based SORTING ONLY.

        MUHIMU:
        - /api/products/ daima inarudisha ARRAY ya products (hakuna pagination ya backend).
        - Ukipeleka lat & lng  tunahesabu distance kwa kila product kwa kutumia
          Google Distance Matrix na KUPANGA kwa ukaribu (distance asc) bila
          kuweka limit ya radius.
        - `location` (mji/mkoa) inatumika kama filter ya city, isipokuwa kama
          imekuja kama "Current location" n.k. kutoka frontend  hiyo tuna-ignore
          kama filter ili isilete EMPTY results.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product.
        required: true
      tags:
      - products
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
          description: ''
    patch:
      operationId: products_partial_update
      description: |-
        ViewSet for products with location-based SORTING ONLY.

        MUHIMU:
        - /api/products/ daima inarudisha ARRAY ya products (hakuna pagination ya backend).
        - Ukipeleka lat & lng  tunahesabu distance kwa kila product kwa kutumia
          Google Distance Matrix na KUPANGA kwa ukaribu (distance asc) bila
          kuweka limit ya radius.
        - `location` (mji/mkoa) inatumika kama filter ya city, isipokuwa kama
          imekuja kama "Current location" n.k. kutoka frontend  hiyo tuna-ignore
          kama filter ili isilete EMPTY results.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product.
        required: true
      tags:
      - products
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedProductRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedProductRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedProductRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
          description: ''
    delete:
      operationId: products_destroy
      description: |-
        ViewSet for products with location-based SORTING ONLY.

        MUHIMU:
        - /api/products/ daima inarudisha ARRAY ya products (hakuna pagination ya backend).
        - Ukipeleka lat & lng  tunahesabu distance kwa kila product kwa kutumia
          Google Distance Matrix na KUPANGA kwa ukaribu (distance asc) bila
          kuweka limit ya radius.
        - `location` (mji/mkoa) inatumika kama filter ya city, isipokuwa kama
          imekuja kama "Current location" n.k. kutoka frontend  hiyo tuna-ignore
          kama filter ili isilete EMPTY results.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product.
        required: true
      tags:
      - products
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/products/mine/:
    get:
      operationId: products_mine_retrieve
      description: |-
        Products za muuzaji aliye login (seller dashboard)
        (Hapa nimeacha pagination kama ilivyokuwa ili dashboard isipate list
        kubwa sana kwa mara moja  ukitaka na hapa tuondoe pagination tunaweza
        kubadilisha baadaye.)
      tags:
      - products
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
          description: ''
  /api/products/nearby/:
    get:
      operationId: products_nearby_retrieve
      description: |-
        GET /api/products/nearby/?lat=...&lng=...

        - User yeyote (guest au logged-in) anaweza kutumia.
        - LENGO: kupanga bidhaa zote kwa ukaribu na location ya user,
          bila kuweka radius limit wala limit ya idadi ya products.
        - Radius & limit tukizipokea tunaziacha tu (for future), lakini
          hatuzitumii kufilter  frontend ina-deal na pagination.
      tags:
      - products
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
          description: ''
  /api/products/search_nearby/:
    post:
      operationId: products_search_nearby_create
      description: |-
        Advanced nearby search via POST body (still guest-friendly)

        Body (NearbySearchSerializer):
        {
            "latitude": ...,
            "longitude": ...,
            "radius": 10,         # hapa kwa sasa hatuitumii kufilisha backend,
                                   # tunasort tu kwa distance.
            "category": "...",
            "min_price": ...,
            "max_price": ...,
            "sort_by": "distance" | "price" | "rating"
        }
      tags:
      - products
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
          description: ''
  /api/reviews/:
    get:
      operationId: reviews_list
      description: ViewSet for seller reviews
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - reviews
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedReviewList'
          description: ''
    post:
      operationId: reviews_create
      description: ViewSet for seller reviews
      tags:
      - reviews
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
          description: ''
  /api/reviews/{id}/:
    get:
      operationId: reviews_retrieve
      description: ViewSet for seller reviews
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this review.
        required: true
      tags:
      - reviews
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
          description: ''
    put:
      operationId: reviews_update
      description: ViewSet for seller reviews
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this review.
        required: true
      tags:
      - reviews
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
          description: ''
    patch:
      operationId: reviews_partial_update
      description: ViewSet for seller reviews
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this review.
        required: true
      tags:
      - reviews
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedReviewRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedReviewRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedReviewRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
          description: ''
    delete:
      operationId: reviews_destroy
      description: ViewSet for seller reviews
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this review.
        required: true
      tags:
      - reviews
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/sellers/:
    get:
      operationId: sellers_list
      description: ViewSet for seller profiles
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - sellers
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedSellerProfileList'
          description: ''
    post:
      operationId: sellers_create
      description: ViewSet for seller profiles
      tags:
      - sellers
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SellerProfileCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SellerProfileCreateRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/SellerProfileCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfileCreate'
          description: ''
  /api/sellers/{id}/:
    get:
      operationId: sellers_retrieve
      description: ViewSet for seller profiles
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this seller profile.
        required: true
      tags:
      - sellers
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfile'
          description: ''
    put:
      operationId: sellers_update
      description: ViewSet for seller profiles
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this seller profile.
        required: true
      tags:
      - sellers
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SellerProfileRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SellerProfileRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/SellerProfileRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfile'
          description: ''
    patch:
      operationId: sellers_partial_update
      description: ViewSet for seller profiles
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this seller profile.
        required: true
      tags:
      - sellers
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedSellerProfileRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedSellerProfileRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedSellerProfileRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfile'
          description: ''
    delete:
      operationId: sellers_destroy
      description: ViewSet for seller profiles
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this seller profile.
        required: true
      tags:
      - sellers
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/sellers/{id}/products/:
    get:
      operationId: sellers_products_retrieve
      description: Get all products for a specific seller
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this seller profile.
        required: true
      tags:
      - sellers
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfile'
          description: ''
  /api/sellers/{id}/reviews/:
    get:
      operationId: sellers_reviews_retrieve
      description: Get all reviews for a specific seller
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this seller profile.
        required: true
      tags:
      - sellers
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfile'
          description: ''
  /api/sellers/me/:
    get:
      operationId: sellers_me_retrieve
      description: Get seller profile for current user (if exists)
      tags:
      - sellers
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfile'
          description: ''
  /api/sellers/nearby/:
    get:
      operationId: sellers_nearby_retrieve
      description: |-
        Get nearby sellers based on user's location (Google Distance Matrix)

        - Hakuna tena LIMIT ya idadi ya maduka.
        - Kama `radius` imepelekwa  tunatumia filter_by_radius (km).
        - Kama `radius` haijapelekwa  tunapanga tu kwa distance bila kufilisha.
        - Pagination hatutumii hapa, tunarudisha list yote kwa frontend.
      tags:
      - sellers
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfile'
          description: ''
components:
  schemas:
    Category:
      type: object
      description: Serializer for Category model
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 100
        description:
          type: string
        icon:
          type: string
          maxLength: 50
        product_count:
          type: integer
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - name
      - product_count
    CategoryRequest:
      type: object
      description: Serializer for Category model
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
        icon:
          type: string
          maxLength: 50
      required:
      - name
    ChangePasswordRequest:
      type: object
      description: Serializer ya kubadili password
      properties:
        old_password:
          type: string
          writeOnly: true
          minLength: 1
        new_password:
          type: string
          writeOnly: true
          minLength: 8
        new_password_confirm:
          type: string
          writeOnly: true
          minLength: 8
      required:
      - new_password
      - new_password_confirm
      - old_password
    Conversation:
      type: object
      description: |-
        Conversation LIST (chat list view)

        Inarudisha:
        - buyer (UserMini)
        - seller (SellerMini)
        - product (ProductMini)
        - last_message (MessageSerializer)
        - unread_count (kwa current user)
        - is_typing_other_side (typing indicator)
      properties:
        id:
          type: integer
          readOnly: true
        buyer:
          allOf:
          - $ref: '#/components/schemas/UserMini'
          readOnly: true
        seller:
          allOf:
          - $ref: '#/components/schemas/SellerMini'
          readOnly: true
        product:
          allOf:
          - $ref: '#/components/schemas/ProductMini'
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        last_message_at:
          type: string
          format: date-time
          readOnly: true
        last_message:
          allOf:
          - $ref: '#/components/schemas/Message'
          readOnly: true
        unread_count:
          type: integer
          readOnly: true
        is_typing_other_side:
          type: boolean
          readOnly: true
      required:
      - buyer
      - created_at
      - id
      - is_typing_other_side
      - last_message
      - last_message_at
      - product
      - seller
      - unread_count
    ConversationDetail:
      type: object
      description: |-
        DETAIL ya conversation moja:

        - fields zote za ConversationSerializer
        - messages: list ya MessageSerializer
        - participant_states: typing & read states
      properties:
        id:
          type: integer
          readOnly: true
        buyer:
          allOf:
          - $ref: '#/components/schemas/UserMini'
          readOnly: true
        seller:
          allOf:
          - $ref: '#/components/schemas/SellerMini'
          readOnly: true
        product:
          allOf:
          - $ref: '#/components/schemas/ProductMini'
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        last_message_at:
          type: string
          format: date-time
          readOnly: true
        last_message:
          allOf:
          - $ref: '#/components/schemas/Message'
          readOnly: true
        unread_count:
          type: integer
          readOnly: true
        is_typing_other_side:
          type: boolean
          readOnly: true
        messages:
          type: array
          items:
            $ref: '#/components/schemas/Message'
          readOnly: true
        participant_states:
          type: array
          items:
            $ref: '#/components/schemas/ConversationParticipantState'
          readOnly: true
      required:
      - buyer
      - created_at
      - id
      - is_typing_other_side
      - last_message
      - last_message_at
      - messages
      - participant_states
      - product
      - seller
      - unread_count
    ConversationParticipantState:
      type: object
      description: Hali ya kila user ndani ya conversation (typing, last_seen, last_read)
      properties:
        id:
          type: integer
          readOnly: true
        conversation:
          type: integer
          readOnly: true
        user:
          allOf:
          - $ref: '#/components/schemas/UserMini'
          readOnly: true
        is_typing:
          type: boolean
        last_typing_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        last_seen_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        last_read_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
      required:
      - conversation
      - id
      - last_read_at
      - last_seen_at
      - last_typing_at
      - user
    ConversationParticipantStateRequest:
      type: object
      description: Hali ya kila user ndani ya conversation (typing, last_seen, last_read)
      properties:
        is_typing:
          type: boolean
    DistanceRequestRequest:
      type: object
      description: Request body for distance calculation (Haversine)
      properties:
        latitude1:
          type: string
          format: decimal
          pattern: ^-?\d{0,2}(?:\.\d{0,8})?$
        longitude1:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,8})?$
        latitude2:
          type: string
          format: decimal
          pattern: ^-?\d{0,2}(?:\.\d{0,8})?$
        longitude2:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,8})?$
      required:
      - latitude1
      - latitude2
      - longitude1
      - longitude2
    DistanceResponse:
      type: object
      description: Response body for distance calculation
      properties:
        distance_km:
          type: number
          format: double
        distance_miles:
          type: number
          format: double
      required:
      - distance_km
      - distance_miles
    Favorite:
      type: object
      description: Serializer for Favorite model
      properties:
        id:
          type: integer
          readOnly: true
        seller:
          allOf:
          - $ref: '#/components/schemas/SellerProfile'
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - seller
    FavoriteRequest:
      type: object
      description: Serializer for Favorite model
      properties:
        seller_id:
          type: integer
          writeOnly: true
      required:
      - seller_id
    JWTToken:
      type: object
      description: Response body for auth endpoints (register/login) with JWT
      properties:
        access:
          type: string
        refresh:
          type: string
        user:
          $ref: '#/components/schemas/User'
      required:
      - access
      - refresh
      - user
    Location:
      type: object
      description: Serializer for Location model
      properties:
        id:
          type: integer
          readOnly: true
        address:
          type: string
        city:
          type: string
          maxLength: 100
        state:
          type: string
          maxLength: 100
        country:
          type: string
          maxLength: 100
        postal_code:
          type: string
          maxLength: 20
        latitude:
          type: string
          format: decimal
          pattern: ^-?\d{0,2}(?:\.\d{0,8})?$
        longitude:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,8})?$
        mapbox_place_id:
          type: string
          maxLength: 255
        distance:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - address
      - city
      - country
      - created_at
      - distance
      - id
      - latitude
      - longitude
      - updated_at
    LocationRequest:
      type: object
      description: Serializer for Location model
      properties:
        address:
          type: string
          minLength: 1
        city:
          type: string
          minLength: 1
          maxLength: 100
        state:
          type: string
          maxLength: 100
        country:
          type: string
          minLength: 1
          maxLength: 100
        postal_code:
          type: string
          maxLength: 20
        latitude:
          type: string
          format: decimal
          pattern: ^-?\d{0,2}(?:\.\d{0,8})?$
        longitude:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,8})?$
        mapbox_place_id:
          type: string
          maxLength: 255
      required:
      - address
      - city
      - country
      - latitude
      - longitude
    LoginRequest:
      type: object
      description: Request body for login endpoint
      properties:
        username:
          type: string
          minLength: 1
        password:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - password
      - username
    LogoutRequest:
      type: object
      description: Request body for logout endpoint (JWT blacklist)
      properties:
        refresh:
          type: string
          minLength: 1
      required:
      - refresh
    Message:
      type: object
      description: |-
        Serializer kwa ujumbe mmoja kwenye conversation (read)
        WhatsApp style: ina sender mini, status, timestamps.
      properties:
        id:
          type: integer
          readOnly: true
        conversation:
          type: integer
          readOnly: true
        sender:
          allOf:
          - $ref: '#/components/schemas/UserMini'
          readOnly: true
        text:
          type: string
        status:
          allOf:
          - $ref: '#/components/schemas/MessageStatusEnum'
          readOnly: true
        is_read:
          type: boolean
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - conversation
      - created_at
      - id
      - is_read
      - sender
      - status
      - text
      - updated_at
    MessageCreate:
      type: object
      description: |-
        Serializer kwa kutuma message mpya (create)

        Body:
        {
            "conversation": 1,   # id ya conversation
            "text": "Habari, hii bidhaa bado ipo?"
        }
      properties:
        conversation:
          type: integer
        text:
          type: string
      required:
      - conversation
      - text
    MessageCreateRequest:
      type: object
      description: |-
        Serializer kwa kutuma message mpya (create)

        Body:
        {
            "conversation": 1,   # id ya conversation
            "text": "Habari, hii bidhaa bado ipo?"
        }
      properties:
        conversation:
          type: integer
        text:
          type: string
          minLength: 1
      required:
      - conversation
      - text
    MessageRequest:
      type: object
      description: |-
        Serializer kwa ujumbe mmoja kwenye conversation (read)
        WhatsApp style: ina sender mini, status, timestamps.
      properties:
        text:
          type: string
          minLength: 1
      required:
      - text
    MessageStatusEnum:
      enum:
      - sent
      - delivered
      - read
      type: string
      description: |-
        * `sent` - Sent
        * `delivered` - Delivered
        * `read` - Read
    NotifTypeEnum:
      enum:
      - order_new
      - order_status
      - chat_message
      - order_created
      type: string
      description: |-
        * `order_new` - New order
        * `order_status` - Order status update
        * `chat_message` - Chat message
        * `order_created` - Order created
    Notification:
      type: object
      description: |-
        Serializer kwa notification (order mpya, message mpya, nk.)

        data:
        {
          "order_id": ...,
          "conversation_id": ...,
          "product_id": ...,
          "seller_id": ...,
          "buyer_id": ...
        }
      properties:
        id:
          type: integer
          readOnly: true
        user:
          allOf:
          - $ref: '#/components/schemas/UserMini'
          readOnly: true
        notif_type:
          $ref: '#/components/schemas/NotifTypeEnum'
        title:
          type: string
          maxLength: 255
        body:
          type: string
        data:
          nullable: true
        is_read:
          type: boolean
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - notif_type
      - title
      - user
    NotificationRequest:
      type: object
      description: |-
        Serializer kwa notification (order mpya, message mpya, nk.)

        data:
        {
          "order_id": ...,
          "conversation_id": ...,
          "product_id": ...,
          "seller_id": ...,
          "buyer_id": ...
        }
      properties:
        notif_type:
          $ref: '#/components/schemas/NotifTypeEnum'
        title:
          type: string
          minLength: 1
          maxLength: 255
        body:
          type: string
        data:
          nullable: true
        is_read:
          type: boolean
      required:
      - notif_type
      - title
    Order:
      type: object
      description: Read serializer kwa Order (list/detail)
      properties:
        id:
          type: integer
          readOnly: true
        product:
          allOf:
          - $ref: '#/components/schemas/OrderProduct'
          readOnly: true
        buyer:
          allOf:
          - $ref: '#/components/schemas/User'
          readOnly: true
        seller:
          allOf:
          - $ref: '#/components/schemas/SellerProfile'
          readOnly: true
        quantity:
          type: integer
        unit_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
        total_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,10}(?:\.\d{0,2})?$
          readOnly: true
        status:
          allOf:
          - $ref: '#/components/schemas/OrderStatusEnum'
          readOnly: true
        delivery_address:
          type: string
        contact_phone:
          type: string
          maxLength: 20
        note:
          type: string
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - buyer
      - created_at
      - id
      - product
      - seller
      - status
      - total_price
      - unit_price
      - updated_at
    OrderCreate:
      type: object
      description: Create serializer kwa Order.
      properties:
        product:
          type: integer
        quantity:
          type: integer
        delivery_address:
          type: string
        contact_phone:
          type: string
          maxLength: 20
        note:
          type: string
      required:
      - product
    OrderCreateRequest:
      type: object
      description: Create serializer kwa Order.
      properties:
        product:
          type: integer
        quantity:
          type: integer
        delivery_address:
          type: string
        contact_phone:
          type: string
          maxLength: 20
        note:
          type: string
      required:
      - product
    OrderProduct:
      type: object
      description: Product summary ndani ya Order
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 255
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          maxLength: 3
        image_url:
          type: string
          nullable: true
          readOnly: true
        shop_name:
          type: string
          readOnly: true
      required:
      - id
      - image_url
      - name
      - price
      - shop_name
    OrderProductRequest:
      type: object
      description: Product summary ndani ya Order
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          minLength: 1
          maxLength: 3
      required:
      - name
      - price
    OrderRequest:
      type: object
      description: Read serializer kwa Order (list/detail)
      properties:
        quantity:
          type: integer
        delivery_address:
          type: string
        contact_phone:
          type: string
          maxLength: 20
        note:
          type: string
    OrderStatusEnum:
      enum:
      - pending
      - accepted
      - rejected
      - cancelled
      - completed
      type: string
      description: |-
        * `pending` - Pending
        * `accepted` - Accepted
        * `rejected` - Rejected
        * `cancelled` - Cancelled
        * `completed` - Completed
    PaginatedCategoryList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Category'
    PaginatedConversationList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Conversation'
    PaginatedFavoriteList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Favorite'
    PaginatedMessageList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Message'
    PaginatedNotificationList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Notification'
    PaginatedOrderList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Order'
    PaginatedProductImageList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ProductImage'
    PaginatedProductLikeList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ProductLike'
    PaginatedProductList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Product'
    PaginatedReviewList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Review'
    PaginatedSellerProfileList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/SellerProfile'
    PatchedCategoryRequest:
      type: object
      description: Serializer for Category model
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
        icon:
          type: string
          maxLength: 50
    PatchedFavoriteRequest:
      type: object
      description: Serializer for Favorite model
      properties:
        seller_id:
          type: integer
          writeOnly: true
    PatchedMessageRequest:
      type: object
      description: |-
        Serializer kwa ujumbe mmoja kwenye conversation (read)
        WhatsApp style: ina sender mini, status, timestamps.
      properties:
        text:
          type: string
          minLength: 1
    PatchedNotificationRequest:
      type: object
      description: |-
        Serializer kwa notification (order mpya, message mpya, nk.)

        data:
        {
          "order_id": ...,
          "conversation_id": ...,
          "product_id": ...,
          "seller_id": ...,
          "buyer_id": ...
        }
      properties:
        notif_type:
          $ref: '#/components/schemas/NotifTypeEnum'
        title:
          type: string
          minLength: 1
          maxLength: 255
        body:
          type: string
        data:
          nullable: true
        is_read:
          type: boolean
    PatchedOrderRequest:
      type: object
      description: Read serializer kwa Order (list/detail)
      properties:
        quantity:
          type: integer
        delivery_address:
          type: string
        contact_phone:
          type: string
          maxLength: 20
        note:
          type: string
    PatchedProductImageRequest:
      type: object
      description: |-
        Serializer for ProductImage model

        - Accepts uploaded file via `image`.
        - Exposes `image_url` as absolute URL for frontend.
      properties:
        image:
          type: string
          format: binary
        is_primary:
          type: boolean
        order:
          type: integer
    PatchedProductLikeRequest:
      type: object
      description: Simple serializer for a single like record
      properties:
        product:
          type: integer
    PatchedProductRequest:
      type: object
      description: |-
        Serializer for Product model (read)

        - `image` main image
        - `image_url` absolute URL
        - seller: SellerProfileSerializer (ina rating, total_sales, location, distance)
        - distance_km from haversine (source="distance" attribute on queryset)
        - likes_count & is_liked
        - sales_count & units_sold (per product)
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
          minLength: 1
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          minLength: 1
          maxLength: 3
        stock_quantity:
          type: integer
          minimum: 0
        is_active:
          type: boolean
        image:
          type: string
          format: binary
          writeOnly: true
          nullable: true
    PatchedReviewRequest:
      type: object
      description: Serializer for Review model
      properties:
        seller:
          type: integer
        rating:
          type: integer
          maximum: 5
          minimum: 1
        comment:
          type: string
    PatchedSellerProfileRequest:
      type: object
      description: |-
        Full SellerProfile:

        - user: full UserSerializer (ina profile info)
        - location: LocationSerializer (ina distance kama umehesabiwa)
        - logo_url: absolute URL
        - rating, rating_count
        - total_sales, items_sold
        - distance: kwa seller (ikiwekwa na haversine kwenye view)
      properties:
        business_name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        phone_number:
          type: string
          maxLength: 20
        is_verified:
          type: boolean
        logo:
          type: string
          format: binary
          nullable: true
        shop_image:
          type: string
          format: binary
          nullable: true
    PatchedUserSettingsUpdateRequest:
      type: object
      description: Update basic user info + preferences (profile page)
      properties:
        first_name:
          type: string
        last_name:
          type: string
        preferred_language:
          $ref: '#/components/schemas/PreferredLanguageEnum'
        theme:
          $ref: '#/components/schemas/ThemeEnum'
    PreferredLanguageEnum:
      enum:
      - en
      - sw
      type: string
      description: |-
        * `en` - English
        * `sw` - Swahili
    Product:
      type: object
      description: |-
        Serializer for Product model (read)

        - `image` main image
        - `image_url` absolute URL
        - seller: SellerProfileSerializer (ina rating, total_sales, location, distance)
        - distance_km from haversine (source="distance" attribute on queryset)
        - likes_count & is_liked
        - sales_count & units_sold (per product)
      properties:
        id:
          type: integer
          readOnly: true
        seller:
          allOf:
          - $ref: '#/components/schemas/SellerProfile'
          readOnly: true
        seller_id:
          type: integer
          readOnly: true
        category:
          allOf:
          - $ref: '#/components/schemas/Category'
          readOnly: true
        name:
          type: string
          maxLength: 255
        description:
          type: string
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          maxLength: 3
        stock_quantity:
          type: integer
          minimum: 0
        is_active:
          type: boolean
        image_url:
          type: string
          nullable: true
          readOnly: true
        images:
          type: array
          items:
            $ref: '#/components/schemas/ProductImage'
          readOnly: true
        in_stock:
          type: boolean
          readOnly: true
        is_available:
          type: boolean
          readOnly: true
        distance_km:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
        shop_name:
          type: string
          readOnly: true
        city:
          type: string
          readOnly: true
          nullable: true
        latitude:
          type: string
          nullable: true
          readOnly: true
        longitude:
          type: string
          nullable: true
          readOnly: true
        likes_count:
          type: integer
          readOnly: true
        is_liked:
          type: boolean
          readOnly: true
        sales_count:
          type: integer
          readOnly: true
        units_sold:
          type: integer
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - category
      - city
      - created_at
      - description
      - distance_km
      - id
      - image_url
      - images
      - in_stock
      - is_available
      - is_liked
      - latitude
      - likes_count
      - longitude
      - name
      - price
      - sales_count
      - seller
      - seller_id
      - shop_name
      - units_sold
      - updated_at
    ProductCreate:
      type: object
      description: |-
        Serializer for creating products

        - Accepts `category_id` (FK).
        - Accepts `image` (file upload).
      properties:
        category_id:
          type: integer
          nullable: true
        name:
          type: string
          maxLength: 255
        description:
          type: string
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          maxLength: 3
        stock_quantity:
          type: integer
          minimum: 0
        is_active:
          type: boolean
        image:
          type: string
          format: uri
          nullable: true
      required:
      - description
      - name
      - price
    ProductCreateRequest:
      type: object
      description: |-
        Serializer for creating products

        - Accepts `category_id` (FK).
        - Accepts `image` (file upload).
      properties:
        category_id:
          type: integer
          nullable: true
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
          minLength: 1
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          minLength: 1
          maxLength: 3
        stock_quantity:
          type: integer
          minimum: 0
        is_active:
          type: boolean
        image:
          type: string
          format: binary
          nullable: true
      required:
      - description
      - name
      - price
    ProductImage:
      type: object
      description: |-
        Serializer for ProductImage model

        - Accepts uploaded file via `image`.
        - Exposes `image_url` as absolute URL for frontend.
      properties:
        id:
          type: integer
          readOnly: true
        image:
          type: string
          format: uri
        image_url:
          type: string
          nullable: true
          readOnly: true
        is_primary:
          type: boolean
        order:
          type: integer
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - image
      - image_url
    ProductImageRequest:
      type: object
      description: |-
        Serializer for ProductImage model

        - Accepts uploaded file via `image`.
        - Exposes `image_url` as absolute URL for frontend.
      properties:
        image:
          type: string
          format: binary
        is_primary:
          type: boolean
        order:
          type: integer
      required:
      - image
    ProductLike:
      type: object
      description: Simple serializer for a single like record
      properties:
        id:
          type: integer
          readOnly: true
        user:
          type: integer
          readOnly: true
        product:
          type: integer
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - product
      - user
    ProductLikeRequest:
      type: object
      description: Simple serializer for a single like record
      properties:
        product:
          type: integer
      required:
      - product
    ProductMini:
      type: object
      description: Product mdogo kwa chat header / notification payload.
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 255
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          maxLength: 3
        image_url:
          type: string
          nullable: true
          readOnly: true
        likes_count:
          type: integer
          readOnly: true
        sales_count:
          type: integer
          readOnly: true
        units_sold:
          type: integer
          readOnly: true
      required:
      - id
      - image_url
      - likes_count
      - name
      - price
      - sales_count
      - units_sold
    ProductMiniRequest:
      type: object
      description: Product mdogo kwa chat header / notification payload.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          minLength: 1
          maxLength: 3
      required:
      - name
      - price
    ProductRequest:
      type: object
      description: |-
        Serializer for Product model (read)

        - `image` main image
        - `image_url` absolute URL
        - seller: SellerProfileSerializer (ina rating, total_sales, location, distance)
        - distance_km from haversine (source="distance" attribute on queryset)
        - likes_count & is_liked
        - sales_count & units_sold (per product)
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
          minLength: 1
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          minLength: 1
          maxLength: 3
        stock_quantity:
          type: integer
          minimum: 0
        is_active:
          type: boolean
        image:
          type: string
          format: binary
          writeOnly: true
          nullable: true
      required:
      - description
      - name
      - price
    Review:
      type: object
      description: Serializer for Review model
      properties:
        id:
          type: integer
          readOnly: true
        seller:
          type: integer
        seller_name:
          type: string
          readOnly: true
        user:
          allOf:
          - $ref: '#/components/schemas/User'
          readOnly: true
        rating:
          type: integer
          maximum: 5
          minimum: 1
        comment:
          type: string
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - rating
      - seller
      - seller_name
      - updated_at
      - user
    ReviewRequest:
      type: object
      description: Serializer for Review model
      properties:
        seller:
          type: integer
        rating:
          type: integer
          maximum: 5
          minimum: 1
        comment:
          type: string
      required:
      - rating
      - seller
    SellerMini:
      type: object
      description: Seller kwa matumizi ya ndani ya product / conversation headers.
      properties:
        id:
          type: integer
          readOnly: true
        business_name:
          type: string
          maxLength: 255
        is_verified:
          type: boolean
        rating:
          type: string
          format: decimal
          pattern: ^-?\d{0,1}(?:\.\d{0,2})?$
        rating_count:
          type: integer
        total_sales:
          type: integer
        items_sold:
          type: integer
        logo_url:
          type: string
          nullable: true
          readOnly: true
        user:
          allOf:
          - $ref: '#/components/schemas/UserMini'
          readOnly: true
      required:
      - business_name
      - id
      - logo_url
      - user
    SellerMiniRequest:
      type: object
      description: Seller kwa matumizi ya ndani ya product / conversation headers.
      properties:
        business_name:
          type: string
          minLength: 1
          maxLength: 255
        is_verified:
          type: boolean
        rating:
          type: string
          format: decimal
          pattern: ^-?\d{0,1}(?:\.\d{0,2})?$
        rating_count:
          type: integer
        total_sales:
          type: integer
        items_sold:
          type: integer
      required:
      - business_name
    SellerProfile:
      type: object
      description: |-
        Full SellerProfile:

        - user: full UserSerializer (ina profile info)
        - location: LocationSerializer (ina distance kama umehesabiwa)
        - logo_url: absolute URL
        - rating, rating_count
        - total_sales, items_sold
        - distance: kwa seller (ikiwekwa na haversine kwenye view)
      properties:
        id:
          type: integer
          readOnly: true
        user:
          allOf:
          - $ref: '#/components/schemas/User'
          readOnly: true
        business_name:
          type: string
          maxLength: 255
        description:
          type: string
        phone_number:
          type: string
          maxLength: 20
        is_verified:
          type: boolean
        rating:
          type: string
          format: decimal
          pattern: ^-?\d{0,1}(?:\.\d{0,2})?$
          readOnly: true
        rating_count:
          type: integer
          readOnly: true
        total_sales:
          type: integer
          readOnly: true
        items_sold:
          type: integer
          readOnly: true
        logo:
          type: string
          format: uri
          nullable: true
        logo_url:
          type: string
          nullable: true
          readOnly: true
        shop_image:
          type: string
          format: uri
          nullable: true
        shop_image_url:
          type: string
          nullable: true
          readOnly: true
        location:
          allOf:
          - $ref: '#/components/schemas/Location'
          readOnly: true
        distance:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - business_name
      - created_at
      - distance
      - id
      - items_sold
      - location
      - logo_url
      - rating
      - rating_count
      - shop_image_url
      - total_sales
      - updated_at
      - user
    SellerProfileCreate:
      type: object
      description: Serializer for creating seller profiles together with their location
      properties:
        business_name:
          type: string
          maxLength: 255
        description:
          type: string
        phone_number:
          type: string
          maxLength: 20
        logo:
          type: string
          format: uri
          nullable: true
        shop_image:
          type: string
          format: uri
          nullable: true
        location:
          $ref: '#/components/schemas/Location'
      required:
      - business_name
      - location
    SellerProfileCreateRequest:
      type: object
      description: Serializer for creating seller profiles together with their location
      properties:
        business_name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        phone_number:
          type: string
          maxLength: 20
        logo:
          type: string
          format: binary
          nullable: true
        shop_image:
          type: string
          format: binary
          nullable: true
        location:
          $ref: '#/components/schemas/LocationRequest'
      required:
      - business_name
      - location
    SellerProfileRequest:
      type: object
      description: |-
        Full SellerProfile:

        - user: full UserSerializer (ina profile info)
        - location: LocationSerializer (ina distance kama umehesabiwa)
        - logo_url: absolute URL
        - rating, rating_count
        - total_sales, items_sold
        - distance: kwa seller (ikiwekwa na haversine kwenye view)
      properties:
        business_name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        phone_number:
          type: string
          maxLength: 20
        is_verified:
          type: boolean
        logo:
          type: string
          format: binary
          nullable: true
        shop_image:
          type: string
          format: binary
          nullable: true
      required:
      - business_name
    SimpleMessage:
      type: object
      description: Simple message response (e.g. logout, success)
      properties:
        message:
          type: string
      required:
      - message
    ThemeEnum:
      enum:
      - light
      - dark
      - system
      type: string
      description: |-
        * `light` - Light
        * `dark` - Dark
        * `system` - System
    TokenObtainPair:
      type: object
      properties:
        access:
          type: string
          readOnly: true
        refresh:
          type: string
          readOnly: true
      required:
      - access
      - refresh
    TokenObtainPairRequest:
      type: object
      properties:
        username:
          type: string
          writeOnly: true
          minLength: 1
        password:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - password
      - username
    TokenRefresh:
      type: object
      properties:
        access:
          type: string
          readOnly: true
        refresh:
          type: string
      required:
      - access
      - refresh
    TokenRefreshRequest:
      type: object
      properties:
        refresh:
          type: string
          minLength: 1
      required:
      - refresh
    TokenVerifyRequest:
      type: object
      properties:
        token:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - token
    User:
      type: object
      description: Serializer kwa User model (ikiwa na info ya profile).
      properties:
        id:
          type: integer
          readOnly: true
        username:
          type: string
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          title: Email address
          maxLength: 254
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
        date_joined:
          type: string
          format: date-time
          readOnly: true
        is_seller:
          type: boolean
          readOnly: true
        preferred_language:
          type: string
          nullable: true
          readOnly: true
        theme:
          type: string
          nullable: true
          readOnly: true
        avatar_url:
          type: string
          nullable: true
          readOnly: true
      required:
      - avatar_url
      - date_joined
      - id
      - is_seller
      - preferred_language
      - theme
      - username
    UserMini:
      type: object
      description: User mdogo kwa ajili ya chat, seller info, n.k.
      properties:
        id:
          type: integer
          readOnly: true
        username:
          type: string
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
        email:
          type: string
          format: email
          title: Email address
          maxLength: 254
        avatar_url:
          type: string
          nullable: true
          readOnly: true
        is_seller:
          type: boolean
          readOnly: true
      required:
      - avatar_url
      - id
      - is_seller
      - username
    UserMiniRequest:
      type: object
      description: User mdogo kwa ajili ya chat, seller info, n.k.
      properties:
        username:
          type: string
          minLength: 1
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
        email:
          type: string
          format: email
          title: Email address
          maxLength: 254
      required:
      - username
    UserProfile:
      type: object
      description: |-
        Profile ya user:
        - is_seller: kama ni muuzaji au mnunuaji
        - preferred_language: 'en' / 'sw'
        - theme: 'light' / 'dark' / 'system'
        - avatar: profile picture
      properties:
        is_seller:
          type: boolean
        preferred_language:
          $ref: '#/components/schemas/PreferredLanguageEnum'
        theme:
          $ref: '#/components/schemas/ThemeEnum'
        avatar:
          type: string
          format: uri
          nullable: true
        avatar_url:
          type: string
          nullable: true
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - avatar_url
      - created_at
      - updated_at
    UserRegistrationRequest:
      type: object
      description: |-
        Serializer kwa user registration

        - Accepts username OR tuna-generate kutoka email.
        - Inahitaji password & password_confirm zilingane.
        - is_seller: user achague kama ni seller au buyer.
        - preferred_language & theme tunazi-set kwenye UserProfile.
      properties:
        username:
          type: string
          minLength: 1
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          title: Email address
          maxLength: 254
        password:
          type: string
          writeOnly: true
          minLength: 8
        password_confirm:
          type: string
          writeOnly: true
          minLength: 8
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
        is_seller:
          type: boolean
          writeOnly: true
          default: false
        preferred_language:
          allOf:
          - $ref: '#/components/schemas/PreferredLanguageEnum'
          writeOnly: true
          default: en
        theme:
          allOf:
          - $ref: '#/components/schemas/ThemeEnum'
          writeOnly: true
          default: system
      required:
      - password
      - password_confirm
      - username
    UserRequest:
      type: object
      description: Serializer kwa User model (ikiwa na info ya profile).
      properties:
        username:
          type: string
          minLength: 1
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          title: Email address
          maxLength: 254
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
      required:
      - username
    UserSettingsUpdateRequest:
      type: object
      description: Update basic user info + preferences (profile page)
      properties:
        first_name:
          type: string
        last_name:
          type: string
        preferred_language:
          $ref: '#/components/schemas/PreferredLanguageEnum'
        theme:
          $ref: '#/components/schemas/ThemeEnum'
  securitySchemes:
    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
