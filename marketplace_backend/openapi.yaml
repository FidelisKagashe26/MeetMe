openapi: 3.0.3
info:
  title: Marketplace API
  version: 1.0.0
  description: Location-based marketplace backend
paths:
  /api/auth/jwt/create/:
    post:
      operationId: auth_jwt_create_create
      description: |-
        Takes a set of user credentials and returns an access and refresh JSON web
        token pair to prove the authentication of those credentials.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
        required: true
      security:
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenObtainPair'
          description: ''
  /api/auth/jwt/refresh/:
    post:
      operationId: auth_jwt_refresh_create
      description: |-
        Takes a refresh type JSON web token and returns an access type JSON web
        token if the refresh token is valid.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
        required: true
      security:
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenRefresh'
          description: ''
  /api/auth/jwt/verify/:
    post:
      operationId: auth_jwt_verify_create
      description: |-
        Takes a token and indicates if it is valid.  This view provides no
        information about a token's fitness for a particular use.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenVerifyRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenVerifyRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenVerifyRequest'
        required: true
      security:
      - BearerAuth: []
      responses:
        '200':
          description: No response body
  /api/auth/login/:
    post:
      operationId: auth_login_create
      description: |-
        Login user and return JWT access & refresh tokens.

        NOTE: The request uses `username` field, but frontend may send either:
          - username
          - or email (we try both)
      summary: Login user and return JWT tokens
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LoginRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LoginRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JWTToken'
          description: ''
        '400':
          description: Missing credentials
        '401':
          description: Invalid credentials
  /api/auth/logout/:
    post:
      operationId: auth_logout_create
      description: |-
        Logout user by blacklisting refresh token.
        Client should also delete tokens locally.
      summary: Logout user by blacklisting refresh token
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LogoutRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LogoutRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LogoutRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
          description: ''
        '400':
          description: Error while logging out
  /api/auth/register/:
    post:
      operationId: auth_register_create
      description: Register a new user and return JWT tokens
      summary: Register a new user
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JWTToken'
          description: ''
        '400':
          description: Validation error
  /api/categories/:
    get:
      operationId: categories_list
      description: ViewSet for product categories
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - categories
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedCategoryList'
          description: ''
    post:
      operationId: categories_create
      description: ViewSet for product categories
      tags:
      - categories
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CategoryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CategoryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CategoryRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
          description: ''
  /api/categories/{id}/:
    get:
      operationId: categories_retrieve
      description: ViewSet for product categories
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this category.
        required: true
      tags:
      - categories
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
          description: ''
    put:
      operationId: categories_update
      description: ViewSet for product categories
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this category.
        required: true
      tags:
      - categories
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CategoryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CategoryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CategoryRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
          description: ''
    patch:
      operationId: categories_partial_update
      description: ViewSet for product categories
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this category.
        required: true
      tags:
      - categories
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedCategoryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedCategoryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedCategoryRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
          description: ''
    delete:
      operationId: categories_destroy
      description: ViewSet for product categories
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this category.
        required: true
      tags:
      - categories
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/favorites/:
    get:
      operationId: favorites_list
      description: ViewSet for user favorites
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - favorites
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedFavoriteList'
          description: ''
    post:
      operationId: favorites_create
      description: ViewSet for user favorites
      tags:
      - favorites
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Favorite'
          description: ''
  /api/favorites/{id}/:
    get:
      operationId: favorites_retrieve
      description: ViewSet for user favorites
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this favorite.
        required: true
      tags:
      - favorites
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Favorite'
          description: ''
    put:
      operationId: favorites_update
      description: ViewSet for user favorites
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this favorite.
        required: true
      tags:
      - favorites
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Favorite'
          description: ''
    patch:
      operationId: favorites_partial_update
      description: ViewSet for user favorites
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this favorite.
        required: true
      tags:
      - favorites
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Favorite'
          description: ''
    delete:
      operationId: favorites_destroy
      description: ViewSet for user favorites
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this favorite.
        required: true
      tags:
      - favorites
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/favorites/toggle/:
    post:
      operationId: favorites_toggle_create
      description: Toggle favorite status for a seller
      tags:
      - favorites
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Favorite'
          description: ''
  /api/location/distance/:
    post:
      operationId: location_distance_create
      description: Calculate distance between two points (km + miles) using Haversine
        formula
      summary: Calculate distance between two points using Haversine
      tags:
      - location
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DistanceRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DistanceRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DistanceRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DistanceResponse'
          description: ''
        '400':
          description: Bad request or invalid coordinates
  /api/product-images/:
    get:
      operationId: product_images_list
      description: ViewSet for product images (gallery uploads)
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - product-images
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedProductImageList'
          description: ''
    post:
      operationId: product_images_create
      description: ViewSet for product images (gallery uploads)
      tags:
      - product-images
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductImage'
          description: ''
  /api/product-images/{id}/:
    get:
      operationId: product_images_retrieve
      description: ViewSet for product images (gallery uploads)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product image.
        required: true
      tags:
      - product-images
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductImage'
          description: ''
    put:
      operationId: product_images_update
      description: ViewSet for product images (gallery uploads)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product image.
        required: true
      tags:
      - product-images
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductImage'
          description: ''
    patch:
      operationId: product_images_partial_update
      description: ViewSet for product images (gallery uploads)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product image.
        required: true
      tags:
      - product-images
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedProductImageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedProductImageRequest'
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedProductImageRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductImage'
          description: ''
    delete:
      operationId: product_images_destroy
      description: ViewSet for product images (gallery uploads)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product image.
        required: true
      tags:
      - product-images
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/products/:
    get:
      operationId: products_list
      description: ViewSet for products with location-based filtering
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - products
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedProductList'
          description: ''
    post:
      operationId: products_create
      description: ViewSet for products with location-based filtering
      tags:
      - products
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductCreate'
          description: ''
  /api/products/{id}/:
    get:
      operationId: products_retrieve
      description: ViewSet for products with location-based filtering
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product.
        required: true
      tags:
      - products
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
          description: ''
    put:
      operationId: products_update
      description: ViewSet for products with location-based filtering
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product.
        required: true
      tags:
      - products
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
          description: ''
    patch:
      operationId: products_partial_update
      description: ViewSet for products with location-based filtering
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product.
        required: true
      tags:
      - products
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedProductRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedProductRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedProductRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
          description: ''
    delete:
      operationId: products_destroy
      description: ViewSet for products with location-based filtering
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this product.
        required: true
      tags:
      - products
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/products/nearby/:
    get:
      operationId: products_nearby_retrieve
      description: |-
        GET /api/products/nearby/?lat=...&lng=...&radius=10&search=...&location=...

        Used by the main marketplace search page:
        - reads HTML5 geolocation coordinates
        - applies search + location filters
        - returns products sorted by distance
      tags:
      - products
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
          description: ''
  /api/products/search_nearby/:
    post:
      operationId: products_search_nearby_create
      description: Advanced nearby search via POST body (still available if needed)
      tags:
      - products
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
          description: ''
  /api/reviews/:
    get:
      operationId: reviews_list
      description: ViewSet for seller reviews
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - reviews
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedReviewList'
          description: ''
    post:
      operationId: reviews_create
      description: ViewSet for seller reviews
      tags:
      - reviews
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
          description: ''
  /api/reviews/{id}/:
    get:
      operationId: reviews_retrieve
      description: ViewSet for seller reviews
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this review.
        required: true
      tags:
      - reviews
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
          description: ''
    put:
      operationId: reviews_update
      description: ViewSet for seller reviews
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this review.
        required: true
      tags:
      - reviews
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
          description: ''
    patch:
      operationId: reviews_partial_update
      description: ViewSet for seller reviews
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this review.
        required: true
      tags:
      - reviews
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedReviewRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedReviewRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedReviewRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
          description: ''
    delete:
      operationId: reviews_destroy
      description: ViewSet for seller reviews
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this review.
        required: true
      tags:
      - reviews
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/sellers/:
    get:
      operationId: sellers_list
      description: ViewSet for seller profiles
      parameters:
      - name: ordering
        required: false
        in: query
        description: Which field to use when ordering the results.
        schema:
          type: string
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: search
        required: false
        in: query
        description: A search term.
        schema:
          type: string
      tags:
      - sellers
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedSellerProfileList'
          description: ''
    post:
      operationId: sellers_create
      description: ViewSet for seller profiles
      tags:
      - sellers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SellerProfileCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SellerProfileCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SellerProfileCreateRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfileCreate'
          description: ''
  /api/sellers/{id}/:
    get:
      operationId: sellers_retrieve
      description: ViewSet for seller profiles
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this seller profile.
        required: true
      tags:
      - sellers
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfile'
          description: ''
    put:
      operationId: sellers_update
      description: ViewSet for seller profiles
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this seller profile.
        required: true
      tags:
      - sellers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SellerProfileRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SellerProfileRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SellerProfileRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfile'
          description: ''
    patch:
      operationId: sellers_partial_update
      description: ViewSet for seller profiles
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this seller profile.
        required: true
      tags:
      - sellers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedSellerProfileRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedSellerProfileRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedSellerProfileRequest'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfile'
          description: ''
    delete:
      operationId: sellers_destroy
      description: ViewSet for seller profiles
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this seller profile.
        required: true
      tags:
      - sellers
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: No response body
  /api/sellers/{id}/products/:
    get:
      operationId: sellers_products_retrieve
      description: Get all products for a specific seller
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this seller profile.
        required: true
      tags:
      - sellers
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfile'
          description: ''
  /api/sellers/{id}/reviews/:
    get:
      operationId: sellers_reviews_retrieve
      description: Get all reviews for a specific seller
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this seller profile.
        required: true
      tags:
      - sellers
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfile'
          description: ''
  /api/sellers/nearby/:
    get:
      operationId: sellers_nearby_retrieve
      description: Get nearby sellers based on user's location (Haversine, no external
        API)
      tags:
      - sellers
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerProfile'
          description: ''
components:
  schemas:
    Category:
      type: object
      description: Serializer for Category model
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 100
        description:
          type: string
        icon:
          type: string
          maxLength: 50
        product_count:
          type: integer
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - name
      - product_count
    CategoryRequest:
      type: object
      description: Serializer for Category model
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
        icon:
          type: string
          maxLength: 50
      required:
      - name
    DistanceRequestRequest:
      type: object
      description: Request body for distance calculation (Haversine)
      properties:
        latitude1:
          type: string
          format: decimal
          pattern: ^-?\d{0,2}(?:\.\d{0,8})?$
        longitude1:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,8})?$
        latitude2:
          type: string
          format: decimal
          pattern: ^-?\d{0,2}(?:\.\d{0,8})?$
        longitude2:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,8})?$
      required:
      - latitude1
      - latitude2
      - longitude1
      - longitude2
    DistanceResponse:
      type: object
      description: Response body for distance calculation
      properties:
        distance_km:
          type: number
          format: double
        distance_miles:
          type: number
          format: double
      required:
      - distance_km
      - distance_miles
    Favorite:
      type: object
      description: Serializer for Favorite model
      properties:
        id:
          type: integer
          readOnly: true
        seller:
          allOf:
          - $ref: '#/components/schemas/SellerProfile'
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - seller
    JWTToken:
      type: object
      description: Response body for auth endpoints (register/login) with JWT
      properties:
        access:
          type: string
        refresh:
          type: string
        user:
          $ref: '#/components/schemas/User'
      required:
      - access
      - refresh
      - user
    Location:
      type: object
      description: Serializer for Location model
      properties:
        id:
          type: integer
          readOnly: true
        address:
          type: string
        city:
          type: string
          maxLength: 100
        state:
          type: string
          maxLength: 100
        country:
          type: string
          maxLength: 100
        postal_code:
          type: string
          maxLength: 20
        latitude:
          type: string
          format: decimal
          pattern: ^-?\d{0,2}(?:\.\d{0,8})?$
        longitude:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,8})?$
        mapbox_place_id:
          type: string
          maxLength: 255
        distance:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - address
      - city
      - country
      - created_at
      - distance
      - id
      - latitude
      - longitude
    LocationRequest:
      type: object
      description: Serializer for Location model
      properties:
        address:
          type: string
          minLength: 1
        city:
          type: string
          minLength: 1
          maxLength: 100
        state:
          type: string
          maxLength: 100
        country:
          type: string
          minLength: 1
          maxLength: 100
        postal_code:
          type: string
          maxLength: 20
        latitude:
          type: string
          format: decimal
          pattern: ^-?\d{0,2}(?:\.\d{0,8})?$
        longitude:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,8})?$
        mapbox_place_id:
          type: string
          maxLength: 255
      required:
      - address
      - city
      - country
      - latitude
      - longitude
    LoginRequest:
      type: object
      description: Request body for login endpoint
      properties:
        username:
          type: string
          minLength: 1
        password:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - password
      - username
    LogoutRequest:
      type: object
      description: Request body for logout endpoint (JWT blacklist)
      properties:
        refresh:
          type: string
          minLength: 1
      required:
      - refresh
    Message:
      type: object
      description: Simple message response (e.g. logout)
      properties:
        message:
          type: string
      required:
      - message
    PaginatedCategoryList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Category'
    PaginatedFavoriteList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Favorite'
    PaginatedProductImageList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/ProductImage'
    PaginatedProductList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Product'
    PaginatedReviewList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Review'
    PaginatedSellerProfileList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/SellerProfile'
    PatchedCategoryRequest:
      type: object
      description: Serializer for Category model
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
        icon:
          type: string
          maxLength: 50
    PatchedProductImageRequest:
      type: object
      description: |-
        Serializer for ProductImage model

        - Accepts uploaded file via `image`.
        - Exposes `image_url` as absolute URL for frontend.
      properties:
        image:
          type: string
          format: binary
        is_primary:
          type: boolean
        order:
          type: integer
    PatchedProductRequest:
      type: object
      description: |-
        Serializer for Product model

        API is shaped to match the marketplace UI:

        - `image` is the uploaded file (write-only or optional).
        - `image_url` is an absolute URL for the cover image.
        - Flattens seller shop_name, city, coordinates.
        - Exposes `is_available` as alias of `in_stock`.
        - Exposes `distance_km` if nearby search was applied.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
          minLength: 1
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          minLength: 1
          maxLength: 3
        stock_quantity:
          type: integer
          minimum: 0
        is_active:
          type: boolean
        image:
          type: string
          format: binary
          writeOnly: true
          nullable: true
    PatchedReviewRequest:
      type: object
      description: Serializer for Review model
      properties:
        seller:
          type: integer
        rating:
          type: integer
          maximum: 5
          minimum: 1
        comment:
          type: string
    PatchedSellerProfileRequest:
      type: object
      description: Serializer for SellerProfile model
      properties:
        business_name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        phone_number:
          type: string
          maxLength: 20
        is_verified:
          type: boolean
    Product:
      type: object
      description: |-
        Serializer for Product model

        API is shaped to match the marketplace UI:

        - `image` is the uploaded file (write-only or optional).
        - `image_url` is an absolute URL for the cover image.
        - Flattens seller shop_name, city, coordinates.
        - Exposes `is_available` as alias of `in_stock`.
        - Exposes `distance_km` if nearby search was applied.
      properties:
        id:
          type: integer
          readOnly: true
        seller:
          allOf:
          - $ref: '#/components/schemas/SellerProfile'
          readOnly: true
        category:
          allOf:
          - $ref: '#/components/schemas/Category'
          readOnly: true
        name:
          type: string
          maxLength: 255
        description:
          type: string
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          maxLength: 3
        stock_quantity:
          type: integer
          minimum: 0
        is_active:
          type: boolean
        image_url:
          type: string
          nullable: true
          readOnly: true
        images:
          type: array
          items:
            $ref: '#/components/schemas/ProductImage'
          readOnly: true
        in_stock:
          type: boolean
          readOnly: true
        is_available:
          type: boolean
          readOnly: true
        distance_km:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
        shop_name:
          type: string
          readOnly: true
        city:
          type: string
          readOnly: true
          nullable: true
        latitude:
          type: string
          nullable: true
          readOnly: true
        longitude:
          type: string
          nullable: true
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - category
      - city
      - created_at
      - description
      - distance_km
      - id
      - image_url
      - images
      - in_stock
      - is_available
      - latitude
      - longitude
      - name
      - price
      - seller
      - shop_name
      - updated_at
    ProductCreate:
      type: object
      description: |-
        Serializer for creating products

        - Accepts `category_id` (FK).
        - Accepts `image` (file upload).
      properties:
        category_id:
          type: integer
          nullable: true
        name:
          type: string
          maxLength: 255
        description:
          type: string
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          maxLength: 3
        stock_quantity:
          type: integer
          minimum: 0
        is_active:
          type: boolean
        image:
          type: string
          format: uri
          nullable: true
      required:
      - description
      - name
      - price
    ProductCreateRequest:
      type: object
      description: |-
        Serializer for creating products

        - Accepts `category_id` (FK).
        - Accepts `image` (file upload).
      properties:
        category_id:
          type: integer
          nullable: true
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
          minLength: 1
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          minLength: 1
          maxLength: 3
        stock_quantity:
          type: integer
          minimum: 0
        is_active:
          type: boolean
        image:
          type: string
          format: binary
          nullable: true
      required:
      - description
      - name
      - price
    ProductImage:
      type: object
      description: |-
        Serializer for ProductImage model

        - Accepts uploaded file via `image`.
        - Exposes `image_url` as absolute URL for frontend.
      properties:
        id:
          type: integer
          readOnly: true
        image:
          type: string
          format: uri
        image_url:
          type: string
          nullable: true
          readOnly: true
        is_primary:
          type: boolean
        order:
          type: integer
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - image
      - image_url
    ProductImageRequest:
      type: object
      description: |-
        Serializer for ProductImage model

        - Accepts uploaded file via `image`.
        - Exposes `image_url` as absolute URL for frontend.
      properties:
        image:
          type: string
          format: binary
        is_primary:
          type: boolean
        order:
          type: integer
      required:
      - image
    ProductRequest:
      type: object
      description: |-
        Serializer for Product model

        API is shaped to match the marketplace UI:

        - `image` is the uploaded file (write-only or optional).
        - `image_url` is an absolute URL for the cover image.
        - Flattens seller shop_name, city, coordinates.
        - Exposes `is_available` as alias of `in_stock`.
        - Exposes `distance_km` if nearby search was applied.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
          minLength: 1
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          minLength: 1
          maxLength: 3
        stock_quantity:
          type: integer
          minimum: 0
        is_active:
          type: boolean
        image:
          type: string
          format: binary
          writeOnly: true
          nullable: true
      required:
      - description
      - name
      - price
    Review:
      type: object
      description: Serializer for Review model
      properties:
        id:
          type: integer
          readOnly: true
        seller:
          type: integer
        seller_name:
          type: string
          readOnly: true
        user:
          allOf:
          - $ref: '#/components/schemas/User'
          readOnly: true
        rating:
          type: integer
          maximum: 5
          minimum: 1
        comment:
          type: string
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - rating
      - seller
      - seller_name
      - updated_at
      - user
    ReviewRequest:
      type: object
      description: Serializer for Review model
      properties:
        seller:
          type: integer
        rating:
          type: integer
          maximum: 5
          minimum: 1
        comment:
          type: string
      required:
      - rating
      - seller
    SellerProfile:
      type: object
      description: Serializer for SellerProfile model
      properties:
        id:
          type: integer
          readOnly: true
        user:
          allOf:
          - $ref: '#/components/schemas/User'
          readOnly: true
        business_name:
          type: string
          maxLength: 255
        description:
          type: string
        phone_number:
          type: string
          maxLength: 20
        is_verified:
          type: boolean
        rating:
          type: string
          format: decimal
          pattern: ^-?\d{0,1}(?:\.\d{0,2})?$
          readOnly: true
        total_sales:
          type: integer
          readOnly: true
        location:
          allOf:
          - $ref: '#/components/schemas/Location'
          readOnly: true
        distance:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - business_name
      - created_at
      - distance
      - id
      - location
      - rating
      - total_sales
      - updated_at
      - user
    SellerProfileCreate:
      type: object
      description: Serializer for creating seller profiles together with their location
      properties:
        business_name:
          type: string
          maxLength: 255
        description:
          type: string
        phone_number:
          type: string
          maxLength: 20
        location:
          $ref: '#/components/schemas/Location'
      required:
      - business_name
      - location
    SellerProfileCreateRequest:
      type: object
      description: Serializer for creating seller profiles together with their location
      properties:
        business_name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        phone_number:
          type: string
          maxLength: 20
        location:
          $ref: '#/components/schemas/LocationRequest'
      required:
      - business_name
      - location
    SellerProfileRequest:
      type: object
      description: Serializer for SellerProfile model
      properties:
        business_name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        phone_number:
          type: string
          maxLength: 20
        is_verified:
          type: boolean
      required:
      - business_name
    TokenObtainPair:
      type: object
      properties:
        access:
          type: string
          readOnly: true
        refresh:
          type: string
          readOnly: true
      required:
      - access
      - refresh
    TokenObtainPairRequest:
      type: object
      properties:
        username:
          type: string
          writeOnly: true
          minLength: 1
        password:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - password
      - username
    TokenRefresh:
      type: object
      properties:
        access:
          type: string
          readOnly: true
        refresh:
          type: string
      required:
      - access
      - refresh
    TokenRefreshRequest:
      type: object
      properties:
        refresh:
          type: string
          minLength: 1
      required:
      - refresh
    TokenVerifyRequest:
      type: object
      properties:
        token:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - token
    User:
      type: object
      description: Serializer for User model
      properties:
        id:
          type: integer
          readOnly: true
        username:
          type: string
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          title: Email address
          maxLength: 254
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
        date_joined:
          type: string
          format: date-time
          readOnly: true
      required:
      - date_joined
      - id
      - username
    UserRegistrationRequest:
      type: object
      description: |-
        Serializer for user registration

        - Accepts username OR will generate it from email prefix.
        - Requires password & password_confirm to match.
      properties:
        username:
          type: string
          minLength: 1
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          title: Email address
          maxLength: 254
        password:
          type: string
          writeOnly: true
          minLength: 8
        password_confirm:
          type: string
          writeOnly: true
          minLength: 8
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
      required:
      - password
      - password_confirm
      - username
    UserRequest:
      type: object
      description: Serializer for User model
      properties:
        username:
          type: string
          minLength: 1
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          title: Email address
          maxLength: 254
        first_name:
          type: string
          maxLength: 150
        last_name:
          type: string
          maxLength: 150
      required:
      - username
  securitySchemes:
    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
